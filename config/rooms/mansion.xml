<?xml version="1.0" encoding="UTF-8"?>
<ChatRoom id="mansion" xmlns:xi="http://www.w3.org/2001/XInclude">

	<Attribute key="startX" value="297" type="number" />
	<Attribute key="startY" value="567" type="number" />

	<MouseMovementController/>
	<CollisionController target="{Room.player}"/>	
		
	<Collision width="1296" height="700" id="walkableArea" solid="true">
		<Image assetID="hit"/>
	</Collision>
	
	<Filters id="playerFilters">
		<DepthFilter id="playerDepthFilter" scaleBack="-1.4" scaleFront="0.001" />
		<MultiplyFilter id="lightFilter" >
			<Image id="light_filter" assetID="light_filter_asset" />
		</MultiplyFilter>	
	</Filters>
	
	<Sounds target="{Room.player}" >
		<!--<Sound id="backgroundMusic" play="true" looping="true" assetID="music" />-->
	</Sounds>
	
	<Scene id="scene" target="{Room.player}" viewportWidth="784" viewportHeight="445" width="1296" height="700">
		<DisplayObject2D id="background" assetID="background" mouseEnabled="false" />
		<DisplayObject2D id="click" assetID="click" mouseEnabled="true" clickThrough="true" alpha="0"/>
		<ZSortingDisplayObject id="furniture">
			<Character id="player" filters="{Room.playerFilters}" speed="0" defaultSpeed="10" x="{Room.startX}" y="{Room.startY}" originX="210" originY="401" collidable="true" mouseEnabled="true" clickThrough="true" displayObjectClass="uk.co.dubit.graphics.render2D.ActionPlayer">
				<Actions id="actions" defaultAction="stand">
					<Stand id="stand" path="avatar/stand.swf"/>
					<Walk id="walk" path="avatar/walk.swf"/>
				</Actions>
			</Character>
			<DisplayObject2D id="rearporch" assetID="rearporch" x="0" y="521" originX="0" originY="521" mouseEnabled="false"/>
			<DisplayObject2D id="porch" assetID="porch" x="0" y="525" originX="0" originY="525" mouseEnabled="false"/>
			<DisplayObject2D id="shrubs1" assetID="shrubs1" x="0" y="665" originX="0" originY="665" mouseEnabled="false"/>
			<DisplayObject2D id="shrubs2" assetID="shrubs2" x="0" y="632" originX="0" originY="632" mouseEnabled="false"/>
			<DisplayObject2D id="mansiondoor1" assetID="mansiondoor1" x="1296" y="618" originX="75" originY="100" mouseEnabled="true" useHandCursor="true" distance = "140" clickThrough="true" collidable="true"/>
		</ZSortingDisplayObject>
		<DisplayObject2D id="foreground" assetID="foreground" x="0" y="0" originX="0" originY="0" mouseEnabled="false"/>
		<ZSortingDisplayObject id="playerMessages" />
	</Scene>
	
	<Assets>
		<Asset id="hit" url="[base.url]images/mansion/hit.png"/>
		<Asset id="click" url="[base.url]images/mansion/click.jpg"/>
	    <Asset id="light_filter_asset" url="[base.url]images/mansion/light.jpg"/>
		<Asset id="background" url="[base.url]images/mansion/background.jpg"/>
		<Asset id="music" url="[base.url]sounds/mansion/music.mp3" />
		<Asset id="shrubs1" url="[base.url]images/mansion/shrubs1.png"/>
		<Asset id="shrubs2" url="[base.url]images/mansion/shrubs2.png"/>
		<Asset id="porch" url="[base.url]images/mansion/porch.png"/>
		<Asset id="rearporch" url="[base.url]images/mansion/rearporch.png"/>
		<Asset id="foreground" url="[base.url]images/mansion/foreground.png"/>
		<Asset id="mansiondoor1" url="[base.url]images/mansion/mansiondoor1.png" />	
	</Assets>
	
	<Trigger event="OnClick" gameObject="{Room.click}">	
		<MoveTo gameObject="{Room.player}" x="{Room.player.x}" y="{Room.player.y}" targetX="{Event.x}" targetY="{Event.y}"/>
		<AwardExperiencePoints points="8"/>
	</Trigger>

	<Trigger event="OnEnterCollision" gameObject="{Room.mansiondoor1}">	
		<ChangeRoom roomName="docks" useServer="false"/>
	</Trigger>	
	
</ChatRoom>
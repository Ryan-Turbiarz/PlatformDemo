<?xml version="1.0" encoding="UTF-8"?>
<Include xmlns:xi="http://www.w3.org/2001/XInclude">
	<ActivityBars>
		<ActivityBar id="reading" skin="com.dubitplatform.views.ActivityBarView" targetContainer="worldOverlay" target="{Rooms.currentRoom.player}" duration="4280" name="Reading...">
			<Triggers>
				<onActivityStart>
					<BlockMouse />
					<SetValues target="{Meters.energy}" amount="({Meters.energy.amount} - {15})" />
				</onActivityStart>
				
				<onActivityComplete>
					<Call behaviourID="mouseOn" scope="{Rooms.currentRoom}"/>
					<CloseActivityBar activityBar="reading" />
					<AwardExperiencePoints points="10" />
					<UpdateAchievementScore score="({Achievements.booksRead.score} + {1})" achievement="{Achievements.booksRead}"/>
					<UnBlockMouse />
				</onActivityComplete>
			</Triggers>
		</ActivityBar>

		<ActivityBar id="collecting" skin="com.dubitplatform.views.ActivityBarView" targetContainer="worldOverlay" target="{Rooms.currentRoom.player}" duration="4280" track="true" offsetY="200" name="Collecting...">
			<Triggers>
				<onActivityStart>
					<BlockMouse />
				</onActivityStart>
								
				<onActivityComplete>
					<!-- Close the bar -->
					<CloseActivityBar activityBar="collecting" />
					<!-- Give the fruit - this works because the fruit and the collection have the same ids, a clever fudge -->
					<AddToCollection collectionID="fruitCollection" collectableID="{Event.activityBar.targettedGameObject.id}" />				
					<!-- Show a bubble -->
					<ShowBubble gameObject="{Rooms.currentRoom.player}" message="Just what I needed for my fruit collection!"/>
					<!-- Award experience points, and notify the player through the notification system -->
					<AwardExperiencePoints points="10"/>
					<CreateNotification title="You just earned 10XP!" body="Congratulations, you just earned 10XP collecting an {Event.activityBar.targettedGameObject.id}. Keep up the good work!" can_remove="true"/>					
					<!-- Play an animation for finding the experience -->
					<ShowAwardXPEffect />
					<!-- Hide the fruit -->
					<SetValues target="{Event.activityBar.targettedGameObject}" visible="false"/>
					
					<UnBlockMouse />
				</onActivityComplete>
			</Triggers>
		</ActivityBar>		
	</ActivityBars>
</Include>